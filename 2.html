<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2 ResizeGrid-ClickSetNotWorking</title>

    <link rel="icon" href="/pics/icon.png"/>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="\2style.css"> <!--My Style B)-->
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>  
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>    
    <style>

        /*moved to 2style.css*/
        /* .gameboard {
            border: 3px solid black;
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            grid-template-rows: repeat(15, 1fr);
        }

        .box {
            border: 1px solid black;
            background-color: darkblue;
            color: white;
            text-align: center;
        }

        .island{
            background-color: green;
        }

        .list-group-item {
            word-wrap: break-word;
            margin: 0;
            padding: 10px;
        } */
        
    </style>
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
            <div class="container">
                <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">CSO</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">
                    <partial name="_LoginPartial" />
                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Test">Test</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container">
        <main role="main" class="pb-3">
            <div class="container-fluid">     <!--Beginning of Main Content-->
        <div class="row">                     <!--Beginning of Progress Bar Section -->
            <div class="col-md-2">
                <h3>
                    Health
                </h3>
                <div class="progress" id="master-progress-bar">
                    <div class="progress-bar bg-danger" id="health-bar" style="width: 100%">4/4
                    </div>
                </div>
                <br>
                <button type="button" class="btn btn-danger" id="btn-damage" onclick="modifyProgress('health-bar', -4)">Damage</button>
            </div>
            <div class="col-md-2">
                <h3>
                    Mines
                </h3>
                <div class="progress">
                    <div class="progress-bar" id="power-1" style="width: 0%">
                        0/3
                    </div>
                </div>
                <br>
                <button type="button" class="btn btn-primary" id="btn-pow-1" onclick="modifyProgress('power-1', 3)">Charge</button>
            </div>
            <div class="col-md-2">
                <h3>
                    Drones
                </h3>
                <div class="progress">
                    <div class="progress-bar" id="power-2" style="width: 0%">
                        0/3
                    </div>
                </div>
                <br>
                <button type="button" class="btn btn-primary" id="btn-pow-2" onclick="modifyProgress('power-2', 4)">Charge</button>
            </div>
            <div class="col-md-2">
                <h3>
                    Sneak
                </h3>
                <div class="progress">
                    <div class="progress-bar" id="power-3" style="width: 0%">
                        0/3
                    </div>
                </div>
                <br>
                <button type="button" class="btn btn-primary" id="btn-pow-3" onclick="modifyProgress('power-3', 6)">Charge</button>
            </div>
            <div class="col-md-2">
                <h3>
                    Torpedo
                </h3>
                <div class="progress">
                    <div class="progress-bar" id="power-4" style="width: 0%">
                        0/3
                    </div>
                </div>
                <br>
                <button type="button" class="btn btn-primary" id="btn-pow-4" onclick="modifyProgress('power-4', 3)">Charge</button>
            </div>
            <div class="col-md-2">
                <h3>
                    Sonar
                </h3>
                <div class="progress">
                    <div class="progress-bar" id="power-5" style="width: 0%">
                        0/3
                    </div>
                </div>
                <br>
                <button type="button" class="btn btn-primary" id="btn-pow-5" onclick="modifyProgress('power-5', 3)">Charge</button>
            </div>
        </div>
        <hr>
        <div class="row">                     <!--Beginning of Game Board Section-->
            <div class="col-md-2">            <!--Beginning of Explainer Boxes-->              
                <ul class="list-group">
                  <li class="list-group-item bw">
                      Viewing:
                      <br>
                    <button type="button" class="btn btn-warning fill-width" id="btn-map_toggle" onclick="toggleMaps('btn-map_toggle')">Your Map</button>
                  </li>
                  <li class="list-group-item bw">
                    <button type="button" class="btn btn-warning fill-width" id="btn-reset-maps" onclick="resetMaps()">Reset Map</button>
                  </li>
                  <li class="list-group-item bw">Empty 3</li>
                  <li class="list-group-item bw">Empty 4</li>
                  <li class="list-group-item bw">Empty 5</li>
                </ul>
		    </div>
            <div class="col-md-10">           <!--Beginning of Gameboard-->
                <div class="gameboard"></div>   <!--Gameboard-->  
            </div>
        </div>
    </div>
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2020 - CSO - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        </div>
    </footer>
    
    <script src="js\2game.js"></script>
    <script>

    console.group("Variables and Objects");
    console.log("CSO Started");

    /* Declaration of global variables here
    * //TODO: create a (JSON probs) file that can act as the configuration file w game variables
    * Changing the inputs here will simulate starting with a 'save state'
    */
    
    //initial Player variables
    let userCurrentLocation = 0;
    let userDirectionHistory = [];
    let enemyCurrentLocation = 0;
    let enemyDirectionHistory = ['N','N','E','E','S','E','E','N','N','W'];
    let startingHealth = 4;
    let startingMines = 4;
    let startingDrones = 4;
    let startingSneak = 4;
    let startingTorpedo = 4;
    let startingSonar = 4;
    
    //initial Gameboard variables
    let initialGameboardLength = 15; //TODO: dynamically find centers
    let initialGameboardHeight = 15; //TODO: dynamically find centers
    let divisionLength = 5; //how many 
    let laidMinesMap = [];

    //initial terrain gerneration variables
    let doGenerateTerrain = true;
    let terrainMap = [];
    let innerTerrainSeeds = [];
    let outerTerrainSeeds = [];
    let innerIslandGenerationThreshold = .55; //0-1 percentage chance
    let outerIslandGenerationThreshold = .3;   //0-1 percentage chance

    console.log("Variables Initialized");

    /*INSTANTIATING OBJECTS*/
    
    //instantiating ProgressBarData objects: name, startVal, maxVal, direction, barClass, barName, btnClass, btnName
    //player progressbar data
    console.group("ProgressBarObjs");
    let healthData = new ProgressBarData("Health", 0, false, "bg-danger", "health-bar", "btn-danger", "btn-health" );
    let minesData = new ProgressBarData("Mines", 3, true, "", "mines-bar", "btn-primary", "btn-mines" );
    let dronesData = new ProgressBarData("Drones", 4, true, "", "drones-bar", "btn-primary", "btn-drones" );
    let sneakData = new ProgressBarData("Sneak", 6, true, "", "sneak-bar", "btn-primary", "btn-sneak" );
    let torpedoData = new ProgressBarData("Torpedo", 3, true, "", "torpedo-bar", "btn-primary", "btn-torpedo" );
    let sonarData = new ProgressBarData("Sonar", 3, true, "", "sonar-bar", "btn-primary", "btn-sonar" );
    //put ProgressBarData objects into array so that they can be looped through during generateProgressBars()
    //TODO: find a way to populate array dynamically
    let playerProgressBarDataArray = [healthData, minesData, dronesData, sneakData, torpedoData, sonarData];
    console.groupEnd("ProgressBarObjs");

    //instantiating Terrain object doGenTer, terMap, inTerSeed, outTerSeed, inIslGenThresh, outIslGenThresh
    let terrain = new Terrain(doGenerateTerrain, terrainMap, innerTerrainSeeds, outerTerrainSeeds, innerIslandGenerationThreshold, outerIslandGenerationThreshold);

    //instantiating Gameboard
    let gameboard = new Gameboard(initialGameboardLength, initialGameboardHeight, divisionLength, laidMinesMap);

    //instantiate player
    let user = new Player(userCurrentLocation, userDirectionHistory, startingHealth, startingMines, startingDrones, startingSneak, startingTorpedo, sonarData);
    let enemy = new Player(enemyCurrentLocation, enemyDirectionHistory, startingHealth, startingMines, startingDrones, startingSneak, startingTorpedo, sonarData);

    console.log("All Objects Instantiated");
    console.groupEnd("Variables and Objects");
    

//JS can start executing when DOM is safe to manipulate
//apperantly this is a pointless section because <script> is called after the page loads
$(document).ready(function(){

    /**
    * Find a way to encorporate these vars into a class...or something..idk im not a DR
    */

    //finding centers and borders
    let divisionSeeds = [];

    console.log("Beginning Gameboard Creation");

    createGrid(gameboard.getGameboardLength(), gameboard.getGameboardHeight());
    //findGridBorders(gameboard.getGameboardLength(), gameboard.getGameboardHeight(), gameboard.getDivisionLength());

    function createGrid(gameboardLength, gameboardHeight){
        
        console.group("createGrid()");
        console.log("Starting Create Grid");

        let gameboardArea = gameboardLength * gameboardHeight;
        console.log("Length: "+gameboardLength+"\nHeight: "+gameboardHeight+"\nArea: "+gameboardArea);

        //set CSS Grid to correct size for a square gameboard
        $(".gameboard").css("grid-template-columns", "repeat("+gameboardLength+", 1fr)");
        $(".gameboard").css("grid-template-rows", "repeat("+gameboardHeight+", 1fr)");

        for(let i = 0; i < gameboardArea; i ++){
            $(".gameboard").append("<div class='box' id='"+i+"'>"+i+"</div>"); //numbers shown
            //$(".gameboard").append("<div class='box' id='"+i+"'></div>"); //numbers hidden
        }
        $(".box").height($(".box").width());

        console.groupEnd("createGrid()");
    }

    //Event Listeners
    $(window).on('resize', function(){
        $(".box").height($(".box").width());
        /* Notifies height change
        console.log("resize");
        console.log($(".box").height());*/
    });


});

        

    </script>
</body>
</html>

<!--
// function findGridBorders(gameboardLength, gameboardHeight, gameboardDivisionLength){
        
    //     console.group("findGridBorders()");
    //     console.log(gameboardDivisionLength);

    //     let foundDivisionCount = 0; //count of how many divisions have been found
    //     let foundDivisionOffset = 0; //counts how many .boxes exist outside of most recently found division

    //     //when i % gameboardDivisionLength == 0, tell foundDivisionCount that a new superBox has been found
    //     for(let i = 1; i <= gameboardLength * gameboardHeight; i ++){
    //         console.log(i+' % '+gameboardDivisionLength+' = '+i%gameboardDivisionLength);
    //         if(i % gameboardDivisionLength == 0){
    //             foundDivisionCount ++; //division found
    //             foundDivisionOffset = 0; //reset offset
    //             divisionSeeds.push(i - 1); //-1
    //         } else {
    //             foundDivisionOffset ++; //no new division found, increment counter
    //             console.log(foundDivisionOffset);
    //         }
    //     }

    //     //for(int i)

    //     //At this point, terrain seeds has the edges of the borders
    //     console.log("Super Boxes Found: "+foundDivisionCount+"\nOffset: "+foundDivisionOffset+"\nBorder Seeds Are: "+divisionSeeds);
        
    //     console.groupEnd("findGridBorders()");
    // }
-->